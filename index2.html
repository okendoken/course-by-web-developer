<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>2</title>
    <style>
        pre {
            display: block;
            padding: 9.5px;
            margin: 0 0 10px;
            font-size: 13px;
            line-height: 20px;
            word-break: break-all;
            word-wrap: break-word;
            white-space: pre;
            white-space: pre-wrap;
            background-color: #f5f5f5;
            border: 1px solid #ccc;
            border: 1px solid rgba(0,0,0,0.15);
            -webkit-border-radius: 0;
            -moz-border-radius: 0;
            border-radius: 0;
        }

        .prettyprint {
            padding: 8px;
            background-color: #f7f7f9;
            border: 1px solid #e1e1e8;
        }

        pre.prettyprint {
            margin-bottom: 20px;
        }

        code {
            padding: 2px 4px;
            color: #d14;
            background-color: #f7f7f9;
            border: 1px solid #e1e1e8;
        }

        .post pre ul {
            line-height: 0;
            margin-bottom: -15px;
            padding: 0;
            padding: 9px 0 6px 25px;
        }

        pre ul.irb li, ul.bash li, ul.psql li {
            list-style-type: none;
            margin-left: -25px;
        }

        .post pre ul li{
            line-height: 20px;
        }

        pre ul.bash li::before {
            content: "$ \0020";
        }
        pre ul.irb li::before {
            content: "> \0020";
        }

        .pln {
            color: #48484c;
        }

        code, pre {
            font-family: Menlo,Monaco,Consolas,"Courier New",monospace;
            font-size:12px;
        }

        .pun, .opn, .clo {
            color: #93a1a1;
        }

        .lit {
            color: #195f91;
        }

        .str, .atv {
            color: #D14;
        }

        .com {
            color: #93a1a1;
        }
    </style>
</head>
<body>


    <h1>Масівы</h1>
    <p>Звычайна нам трэба захоўваць нашмат больш, чым проста адну рэч.
        Напрылад, што калі нам патрэбна захаваць сьпіс месяцаў у годзе?</p>

<pre class="prettyprint"><ul class="irb"><span class="pln">
  </span><li><span class="pln">months </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">"january"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"february"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"march"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"april"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"may"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"june"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"july"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"august"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"september"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"november"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"december"</span><span class="pun">]</span></li><span class="pln">
</span></ul>
</pre>

    <p>Гэта завецца <strong>array (масіў)</strong>.</p>

    <p>Ніжэй тасама масівы. Паспрабуйце стварыць іх:</p>

<pre class="prettyprint"><ul class="irb"><span class="pln">
  </span><li><span class="pun">[</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3423</span><span class="pun">,</span><span class="pln"> </span><span class="lit">85</span><span class="pun">,</span><span class="pln"> </span><span class="lit">65</span><span class="pun">]</span></li><span class="pln">
  </span><li><span class="pun">[</span><span class="str">"m"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"i"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"c"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"h"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"a"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"e"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"l"</span><span class="pun">]</span></li><span class="pln">
  </span><li><span class="pun">[</span><span class="str">"word"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">45</span><span class="pun">,</span><span class="pln"> </span><span class="str">"blah"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">123</span><span class="pun">]</span></li><span class="pln">
</span></ul>
</pre>

    <p>Зрабіце масівы з членамі вашае сямьі, любімымі лікамі і жывёламі, якіх вы найбольш баіцёся.</p>

    <p>Вось яшчэ крыху прыгожых масіваў:</p>

<pre class="prettyprint"><ul class="irb"><span class="pln">
  </span><li><span class="pln">variable </span><span class="pun">=</span><span class="pln"> </span><span class="str">"i'm a variable"</span></li><span class="pln">
  </span><li><span class="pun">[</span><span class="pln">variable</span><span class="pun">,</span><span class="pln"> </span><span class="str">"i'm not a variable"</span><span class="pun">]</span></li><span class="pln">
  </span><li><span class="pun">[</span><span class="lit">62</span><span class="pun">,</span><span class="pln"> </span><span class="lit">62</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]</span></li><span class="pln">
</span></ul>
</pre>

    <p>Зрабіце некалькі масіваў якія маюць зьменныя й выразы ( 893/183 напрыклад).</p>

    <p>А што калі мета-масівы?</p>

<pre class="prettyprint"><ul class="irb"><span class="pln">
  </span><li><span class="pun">[</span><span class="str">"string"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">123</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="str">"another string"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">456</span><span class="pun">],</span><span class="pln"> </span><span class="lit">321</span><span class="pun">,</span><span class="pln"> </span><span class="str">"yet another string"</span><span class="pun">]</span></li><span class="pln">
</span></ul>
</pre>

    <p>Стварыце масівы, якія ўтрымліваюць іншыя масівы.
        Яшчэ лепей, калі масів утрымоўвае зьменныя з іншымі масівамі.</p>



        <h1>Элементы масіваў</h1>

        <p>Вы можаце атрымаць элемент з масіва вось так:</p>

<pre class="prettyprint"><ul class="irb"><span class="pln">
  </span><li><span class="pln">my_array </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">"peanut"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"almond"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"walnut"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"cashew"</span><span class="pun">]</span></li><span class="pln">
  </span><li><span class="pln">my_array</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span></li><span class="pln">
</span></ul>
</pre>

        <p><code>2</code>, якая кажа Ruby з якога месца трэба ўзяць элемент завецца <strong>index</strong>.</p>

        <p>Гэтак жа як і радкі, масівы пачынаюцца з нуля. Памятайце гэта!</p>

        <p>У тых масіваў, якія Вы ўжо зрабілі паспрабуйце падаставаць якія-небудзь элементы.</p>

        <p>Паспрабуйце з масівамі тыя апэрацыі, якія ёсьць у радкоў. Напрыклад
            дзьве лічбы ў квадратных дужках (т.б. <code>my_array[2..3]</code>)
            і адмоўныя індэксы. Будзе вельмі падобна на радкі :)</p>


        <h1>Апэрацыі з масівамі</h1>
        <p>Гэтак жа як і з радкамі, Вы можаце выкарыстоўваць апэратар <code>&lt;&lt;</code> каб дадаваць элемэнты ў масіў:</p>

<pre class="prettyprint"><ul class="irb"><span class="pln">
  </span><li><span class="pln">my_array </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span></li><span class="pln">
  </span><li><span class="pln">my_array </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">"hello world"</span></li><span class="pln">
  </span><li><span class="pln">my_array</span></li><span class="pln">
</span></ul>
</pre>

        <p>У параўнаньні з радком - shovel(рыдлёўка) - лепшы спосаб як дадаваць элемэнты ў масіў.</p>

        <p>Паспрабуйце апэратар <code>+</code>.
            Падказка: Вы можаце складаць два масіва, але ня можаце складаць масіў і радок.</p>


        <h1>Мэтады масіваў</h1>

        <p>Зараз Вы ўжо здолееце зразумець як выклікаць мэтады ў масіва.
            Паспрабуйце даведацца што робяць гэтыя мэтады: <code>sort</code>, <code>length</code>, <code>reverse</code>, <code>+</code>, <code>last</code>, <code>pop</code>, <code>push</code>.</p>

        <p>Яшчэ сінтаксічны цукар: апэратар shovel гэта сінтаксічны цукар мэтада <code>push</code>.</p>

        <p>Варта праглядзець <a href="http://www.ruby-doc.org/core-1.9.3/Array.html" target="_blank">дакумэнтацыю Ruby для масіваў</a>.</p>


        <h1>Масівы й радкі</h1>

        <p>Паспрабуйце:</p>

<pre class="prettyprint"><ul class="irb"><span class="pln">
  </span><li><span class="str">"I am a programmer"</span><span class="pun">.</span><span class="pln">split</span></li><span class="pln">
</span></ul>
</pre>

        <p>І гэта:</p>

<pre class="prettyprint"><ul class="irb"><span class="pln">
  </span><li><span class="str">"I,am,a,programmer"</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="str">","</span><span class="pun">)</span></li><span class="pln">
</span></ul>
</pre>

        <p>Па дэфолту, <code>split</code> выкарыстоўвае прабелы ў якасьці <strong>падзельніка (delimiter)</strong>.
            Але Вы можаце перадаць любы падзяляльнік першым аргумэнтам.</p>

        <p>Пагуляйце яшчэ з <code>split</code>. Паспрабуйце розныя падзяляльнікі.</p>

        <p>Зараз паспрабуйце гэта:</p>

<pre class="prettyprint"><ul class="irb"><span class="pln">
  </span><li><span class="pun">[</span><span class="str">"Please"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"join"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"me"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"back."</span><span class="pun">].</span><span class="pln">join</span><span class="pun">(</span><span class="str">" "</span><span class="pun">)</span></li><span class="pln">
</span></ul>
</pre>

        <p>Што робіць гэты мэтад? Пагуляйце яшчэ зь імі выкарыстоўваючы розныя падзяляльнікі.</p>


        <h1>Мэтад each (кожны)</h1>

    <p>Зараз Вы ўжо маеце базавыя веды як працаваць з масівамі, таму давайце паспрабуем больш прасунуты канцэпт: <strong>looping (цыклы)</strong>.</p>

        <p>Наш калькулятар можа лічыць суму двух лікаў, а што калі мы хочам падлічыць некалькі?
            Мы будзем выкарыстоўваць мэтад <code>each</code>:</p>

<pre class="prettyprint"><span class="pln">total </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
summands </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">,</span><span class="lit">5</span><span class="pun">]</span><span class="pln">
summands</span><span class="pun">.</span><span class="pln">each </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">|</span><span class="pln">summand</span><span class="pun">|</span><span class="pln">
  total </span><span class="pun">+=</span><span class="pln"> summand
</span><span class="kwd">end</span><span class="pln">
total</span></pre>

        <p>Гэта трошкі складана, таму давайце разьбярэмся што адбываецца:</p>

        <ol>
            <li>Ствараецца зьменная <code>total</code> са значэньнем <code>0</code>.</li>
            <li>Ствараецца масіў лічбаў які завецца <code>summands</code>.</li>
            <li>Выклікаецца мэтад <code>each</code> у масіва <code>summands</code>.</li>
            <li>Бярэцца першы элемэнт з <code>summands</code> і зьменнай <code>summand</code> прызначаецца яго значэньне.</li>
            <li>У зьменную <code>total</code> дадаецца бягучы <code>summand</code>.</li>
            <li>4 і 5 паўтараюцца для астатніх лікаў з <code>summands</code>.</li>
        </ol>

        <p>Код, які знаходзіцца паміж <code>do</code> і <code>end</code> завецца <strong>block</strong>.
            Блок вельмі падобны на мэтад, толькі бяз назвы; зьменная паміж <code>|</code> як аргумэнт у мэтадзе.</p>

        <p>Традыцыйна масіў называюць словам у множным ліку, а аргумэнт блока (у такім выпадку) ў адзіночным ліку
            (т.б. <code>summands</code> для масіва й <code>summand</code> для аргумэнта).</p>

        <p>Зараз падыйшла Вашая чарга. Напішыце цыкл, які б лічыў вынік множаньня ўсіх лікаў у масіве.
            Павінна атрымацца вельмі падобна на код, які лічыць суму.</p>



        <h1>puts</h1>
    <p>Давайце прабяжымся па некаторым краінам і скажам якія яны маюць сталіцы:</p>

<pre class="prettyprint"><ul class="irb"><span class="pln">
  </span><li><span class="pln">countries_with_capitals </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="str">'Bangladesh'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Dhaka'</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Belize'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Belmopan'</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Bulgaria'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Sofia'</span><span class="pun">]]</span></li><span class="pln">
  </span><li><span class="pln">countries_with_capitals</span><span class="pun">.</span><span class="pln">each </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">|</span><span class="pln">country_with_capital</span><span class="pun">|</span></li><span class="pln">
  </span><li><span class="pln">  </span><span class="str">"The capital of #{country_with_capital[0]} is #{country_with_capital[1]}."</span></li><span class="pln">
  </span><li><span class="kwd">end</span></li><span class="pln">
</span></ul><span class="pln">
 </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">[[</span><span class="str">"Bangladesh"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Dhaka"</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="str">"Belize"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Belmopan"</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="str">"Bulgaria"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Sofia"</span><span class="pun">]]</span></pre>

        <p>Нічога не атрымалася. Мы не атрымалі нічога акрамя першапачатковага масіва. Што здарылася?</p>

        <p>Давайце паглядзім на код, які лічыць суму лікаў:</p>

<pre class="prettyprint"><ul class="irb"><span class="pln">
  </span><li><span class="pln">sum </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span></li><span class="pln">
  </span><li><span class="pln">summands </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">,</span><span class="lit">5</span><span class="pun">]</span></li><span class="pln">
  </span><li><span class="pln">summands</span><span class="pun">.</span><span class="pln">each </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">|</span><span class="pln">summand</span><span class="pun">|</span></li><span class="pln">
  </span><li><span class="pln">  sum </span><span class="pun">+=</span><span class="pln"> summand</span></li><span class="pln">
  </span><li><span class="kwd">end</span></li><span class="pln">
  </span><li><span class="pln">sum</span></li><span class="pln">
</span></ul>
</pre>

        <p>Што мэтад <code>each</code> насамрэч вярнуў? Атрымліваецца што ў абодвух выпадках ён вярнуў незьмянённы масіў.
            Дык як жа нам надрукаваць тое, што знаходзіцца ўнутры масіва?</p>

        <p>Давайце даведаемся пра мэтад <code>puts</code>:</p>

<pre class="prettyprint"><ul class="irb"><span class="pln">
  </span><li><span class="pln">countries_with_capitals </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="str">'Bangladesh'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Dhaka'</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Belize'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Belmopan'</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Bulgaria'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Sofia'</span><span class="pun">]]</span></li><span class="pln">
  </span><li><span class="pln">countries_with_capitals</span><span class="pun">.</span><span class="pln">each </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">|</span><span class="pln">country_with_capital</span><span class="pun">|</span></li><span class="pln">
  </span><li><span class="pln">  puts </span><span class="str">"The capital of #{country_with_capital[0]} is #{country_with_capital[1]}."</span></li><span class="pln">
  </span><li><span class="kwd">end</span></li><span class="pln">
</span></ul>
</pre>

        <p>Незьмянённы масіў усе так жа й вяртаецца, але <code>puts</code> друкуе кожную лінію на экран.
            Калі Вам цікава што такое <code>puts</code> - гэта глабальны мэтад.
            Дадайце дужкі аргумэнтам(т.б. <code>puts('hi')</code>) і Вам стане прасьцей гэта бачыць.</p><p>

    </p><p>Пагуляйце з <code>puts</code>. Што будзе калі перадаць лічбу альбо масіў як аргумэнт?</p>

        <p>Прабяжыцеся па масіву членаў вашае сямьі й скажыце кожнаму "Вітаньне!" .</p>



        <h1>map і (рэфактарынг) refactoring</h1>
        <p><strong>(Рэфактарынг) Refactoring</strong> - гэта працэс паляпшэньня існуючага кода, без зьмяненьня зьнешніх інтэрфэйсаў.
            Пальпшэньне чатальнасьці, аптымізацыя прадукцыйнасьці і выдаленьне паўтарэньняў - прыклады рэфактарынга.
            Давайце напішем трошкі коду, даведаемся пра новы сінтакс і некалькі мэтадаў і ў рэшце адрэфактарым код.</p>

        <p>Спачатку напішам мэтад які ўдвойвае значэньне кожнага ліка ў масіве:</p>

        <pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="kwd">def</span><span class="pln"> </span><span class="kwd">double</span><span class="pun">(</span><span class="pln">original_numbers</span><span class="pun">)</span></li><li class="L1"><span class="pln">  doubled_numbers </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span></li><li class="L2"><span class="pln">  original_numbers</span><span class="pun">.</span><span class="pln">each </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">|</span><span class="pln">original_number</span><span class="pun">|</span></li><li class="L3"><span class="pln">    doubled_numbers </span><span class="pun">&lt;&lt;</span><span class="pln"> original_number </span><span class="pun">*</span><span class="pln"> </span><span class="lit">2</span></li><li class="L4"><span class="pln">  </span><span class="kwd">end</span></li><li class="L5"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> doubled_numbers</span></li><li class="L6"><span class="kwd">end</span></li></ol></pre>

        <p>Першы рэфактарынг: шосты радок.</p>

        <pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="kwd">def</span><span class="pln"> </span><span class="kwd">double</span><span class="pun">(</span><span class="pln">original_numbers</span><span class="pun">)</span></li><li class="L1"><span class="pln">  doubled_numbers </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span></li><li class="L2"><span class="pln">  original_numbers</span><span class="pun">.</span><span class="pln">each </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">|</span><span class="pln">original_number</span><span class="pun">|</span></li><li class="L3"><span class="pln">    doubled_numbers </span><span class="pun">&lt;&lt;</span><span class="pln"> original_number </span><span class="pun">*</span><span class="pln"> </span><span class="lit">2</span></li><li class="L4"><span class="pln">  </span><span class="kwd">end</span></li><li class="L5"><span class="pln">  doubled_numbers</span></li><li class="L6"><span class="kwd">end</span></li></ol></pre>

        <p>Значэньне апошняй лініі, якая знаходзіцца ў мэтадзе, заўсёды вяртаецца, нават калі й няма ключавога слова <code>return</code>.
            Рубісты рэдка карыстаюцца <code>return</code> і замест гэтага заўсёды карыстаюцца фактам таго, што апошняя лінія ўсё адно вяртаецца.
            З гэтага моманту мы такскма ня будзем пісаць <code>return</code>, а проста будзем ведаць, што падлічаннае значэньне апошняга радка вяртаецца.</p>

        <p>Другі рэфактарынг: калі код паміж <code>do</code> і <code>end</code> толькі адзін радок, блок можа быць запісаны вось так:</p>

        <pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="kwd">def</span><span class="pln"> </span><span class="kwd">double</span><span class="pun">(</span><span class="pln">original_numbers</span><span class="pun">)</span></li><li class="L1"><span class="pln">  doubled_numbers </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span></li><li class="L2"><span class="pln">  original_numbers</span><span class="pun">.</span><span class="pln">each </span><span class="pun">{|</span><span class="pln">original_number</span><span class="pun">|</span><span class="pln"> doubled_numbers </span><span class="pun">&lt;&lt;</span><span class="pln"> original_number </span><span class="pun">*</span><span class="pln"> </span><span class="lit">2</span><span class="pun">}</span></li><li class="L3"><span class="pln">  doubled_numbers</span></li><li class="L4"><span class="kwd">end</span></li></ol></pre>

        <p>Ну вось ужо выглядае лепей!</p>

        <p>Выглядае трошкі напружна што мы павінны мець асобную зьменную <code>doubled_numbers</code> толькі для таго, каб захоўваць падвоеныя лікі.
            Было б файна калі <code>each</code> неяк вяртаў значэньні якія мы палічылі.</p>

        <p>Для гэтага й патрэбен <code>map</code>:</p>

        <pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="kwd">def</span><span class="pln"> </span><span class="kwd">double</span><span class="pun">(</span><span class="pln">original_numbers</span><span class="pun">)</span></li><li class="L1"><span class="pln">  original_numbers</span><span class="pun">.</span><span class="pln">map </span><span class="pun">{|</span><span class="pln">original_number</span><span class="pun">|</span><span class="pln"> original_number </span><span class="pun">*</span><span class="pln"> </span><span class="lit">2</span><span class="pun">}</span></li><li class="L2"><span class="kwd">end</span></li></ol></pre>

        <p><code>original_numbers</code> не зьмянілася (няма <code>!</code>, які кажа, што гэта <strong>дэструктыўны мэтад</strong>).
            Map проста бярэ ўсё што вяртаецца з блока й кладзе ў новы масіў.</p>

        <p>Зараз гэты мэтад выглядае выдатна!</p>

        <p>Пагуляйце яшчэ з <code>map</code> і сінтаксісам з фігурнымі дужкамі для <code>each</code> і <code>map</code>.
            Паспрабуйце выкарыстаць <code>map</code> каб прабегчыся па масіву радкоў і вярнуць іх з вялікімі літарамі.</p>




        <h1>inject і яшчэ рэфактарынг</h1>

        <p>Давайце разглядзім яшчэ адзін <strong>итэратар (iterator)</strong> (так завецца мэтад, які бяжыць па масіву напрыклад <code>each</code> і <code>map</code>).</p>

        <p>Вось як мы лічылі суму раней:</p>

<pre class="prettyprint"><ul class="irb"><span class="pln">
  </span><li><span class="pln">sum </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span></li><span class="pln">
  </span><li><span class="pln">summands </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">,</span><span class="lit">5</span><span class="pun">]</span></li><span class="pln">
  </span><li><span class="pln">summands</span><span class="pun">.</span><span class="pln">each </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">|</span><span class="pln">summand</span><span class="pun">|</span></li><span class="pln">
  </span><li><span class="pln">  sum </span><span class="pun">+=</span><span class="pln"> summand</span></li><span class="pln">
  </span><li><span class="kwd">end</span></li><span class="pln">
  </span><li><span class="pln">sum</span></li><span class="pln">
</span></ul>
</pre>

        <p>Спачатку, давайце перапішым мэтад каб ён прымаў масіў у якасьці аргумэнта:</p>

<pre class="prettyprint"><ul class="irb"><span class="pln">
  </span><li><span class="kwd">def</span><span class="pln"> sum</span><span class="pun">(</span><span class="pln">summands</span><span class="pun">)</span></li><span class="pln">
  </span><li><span class="pln">  total </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span></li><span class="pln">
  </span><li><span class="pln">  summands</span><span class="pun">.</span><span class="pln">each </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">|</span><span class="pln">summand</span><span class="pun">|</span></li><span class="pln">
  </span><li><span class="pln">    total </span><span class="pun">+=</span><span class="pln"> summand</span></li><span class="pln">
  </span><li><span class="pln">  </span><span class="kwd">end</span></li><span class="pln">
  </span><li><span class="pln">  total</span></li><span class="pln">
  </span><li><span class="kwd">end</span></li><span class="pln">
</span></ul>
</pre>

        <p>Потым выкарыстаем сінтаксіс з фігурнымі дужкамі:</p>

<pre class="prettyprint"><ul class="irb"><span class="pln">
  </span><li><span class="kwd">def</span><span class="pln"> sum</span><span class="pun">(</span><span class="pln">summands</span><span class="pun">)</span></li><span class="pln">
  </span><li><span class="pln">  total </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span></li><span class="pln">
  </span><li><span class="pln">  summands</span><span class="pun">.</span><span class="pln">each </span><span class="pun">{|</span><span class="pln">summand</span><span class="pun">|</span><span class="pln"> total </span><span class="pun">+=</span><span class="pln"> summand</span><span class="pun">}</span></li><span class="pln">
  </span><li><span class="pln">  total</span></li><span class="pln">
  </span><li><span class="kwd">end</span></li><span class="pln">
</span></ul>
</pre>

        <p>А зараз новы мэтад - <code>inject</code>. Карыстаемся ім:</p>

<pre class="prettyprint"><ul class="irb"><span class="pln">
  </span><li><span class="kwd">def</span><span class="pln"> sum</span><span class="pun">(</span><span class="pln">summands</span><span class="pun">)</span></li><span class="pln">
  </span><li><span class="pln">  summands</span><span class="pun">.</span><span class="pln">inject</span><span class="pun">(</span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{|</span><span class="pln">total</span><span class="pun">,</span><span class="pln"> summand</span><span class="pun">|</span><span class="pln"> total </span><span class="pun">+=</span><span class="pln"> summand</span><span class="pun">}</span></li><span class="pln">
  </span><li><span class="kwd">end</span></li><span class="pln">
</span></ul>
</pre>

        <p>Паспрабуйце зразумець, што робіць <code>inject</code>. Спачатку яго будзе трошкі складана зразумець,
            але ён - лепшае рашэньня для выпадкаў калі Вам патрэбна зьмяніць значэньне нейкай зьменнай на кожнай ітэрацыі.
            Давайце разглядзім прыклад з<code>sum([2,4,6])</code>.
            Звярніце ўвагу што блок прымае на ўваход два аргумэнта: <code>total</code> і <code>summand</code>.</p>

        <ol>
            <li><code>summands</code> усталёўваецца ў <code>[2,4,6]</code>.</li>
            <li><code>inject</code> выклікаецца ў <code>summands</code>.</li>
            <li><code>total</code> усталёўваецца роўным <code>0</code> - першаму аргумэнту <code>inject</code>.</li>
            <li><code>summand</code> усталёўваецца роўным нулявому элемэнту <code>summands</code>: <code>2</code>.</li>
            <li><code>summand</code> дадаецца да <code>total</code>: <code>0 + 2 = 2</code>.</li>
            <li><code>inject</code> рухаецца на наступную ітэрацыю цыкла.
                    Новае значэньне <code>total</code> (<code>2</code>) "уводзіцца" ў наступную ітэрацыю, а <code>summand</code> усталёўваецца роўным наступнаму элемэнту масіва (<code>4</code>).</li>
            <li>Крокі 5 і 6 паўтараюцца для астатніх элемэнтаў масіва.</li>
                <li>Вяртаецца канчатковае значэньне <code>total</code>: <code>12</code>.</li>
        </ol>

        <p>Гэтак жа як і <code>summand</code> <code>total</code> гэта проста назва зьменнай, якую Вы можаце зьменіць на што пажадаеце ў залежнасьці ад абставін.</p>

        <p>Калі Вы не перадаёце аргумэнт у <code>inject</code>, першы аргумэнт функцыю ўсталёўваецца роўным нулявому элемэнту масіва. Таму мы можам напісаць:</p>

<pre class="prettyprint"><ul class="irb"><span class="pln">
  </span><li><span class="pln">summands</span><span class="pun">.</span><span class="pln">inject </span><span class="pun">{|</span><span class="pln">total</span><span class="pun">,</span><span class="pln"> summand</span><span class="pun">|</span><span class="pln"> total </span><span class="pun">+=</span><span class="pln"> summand</span><span class="pun">}</span></li><span class="pln">
</span></ul>
</pre>

        <p>Пагуляйце яшчэ з <code>inject</code>.
            Выкарыстайце яго каб падлічыць вынік множаньня ўсіх элемэнтаў у масіве.</p>
</body>
</html>